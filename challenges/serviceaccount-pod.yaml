id: serviceaccount-pod
title: "Create ServiceAccount and use it in a Pod"
category: rbac
namespace: sa-chal
cluster: cka-b
timeLimitSeconds: 600
setup: ../scripts/challenges/setup-serviceaccount.sh
grade: ../grading/grade-serviceaccount.sh
description: |
  In namespace 'sa-chal' on cluster cka-b:
  1. Create a ServiceAccount named 'app-sa'
  2. Create a Role 'secret-reader' that can get and list secrets
  3. Bind the Role to the ServiceAccount via RoleBinding 'app-secret-binding'
  4. Create a Pod 'secret-app' using image 'busybox:1.36' with command 'sleep 3600'
     that uses ServiceAccount 'app-sa'
  5. Verify the pod can list secrets: kubectl exec secret-app -- cat /var/run/secrets/kubernetes.io/serviceaccount/token
